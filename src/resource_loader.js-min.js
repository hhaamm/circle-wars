var ResourceLoader=function(){this.imagePaths={shotgun:"img/shotgun.png",ak47:"img/ak47.png",frag:"img/frag.png",health:"img/health.png",machinegun:"img/machinegun.png",pistol:"img/pistol.png",pistol2:"img/pistol2.png",missile:"img/missilelauncher.png",heavygun:"img/heavymachinegun.png",kevlar:"img/kevlar.png"};this.images={};this.imagesLoaded=0;this.loadResources=function(e){debug("Loading");var a=this;for(var c in this.imagePaths){var d=this.imagePaths[c];debug("loading "+d);var b=new Image();b.addEventListener("load",function(){a.imagesLoaded+=1;debug("loaded "+d);if(a.imagesLoaded==Object.keys(a.imagePaths).length){debug("All resources loaded");e.call({success:true})}});b.addEventListener("error",function(f){debug("Error when loading resource "+d);debug(f);e.call({success:false,error:f})});b.src=d;this.images[c]=b}}};