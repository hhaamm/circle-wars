if(typeof window=="undefined"){Missile=require("./bullet.js").Missile;Vector=require("./vector.js")}var Weapon=function(){this.bullets=5;this.type="weapon";this.playerKeyUp=function(){};this.playerKeyDown=function(){};this.lastShootTime=0;this.loadTime=150;this.outsideSuicideZone=15;this.draw=function(a){a.drawImage(this.game.resources.images[this.image],this.x,this.y)};this.canShoot=function(a){return a.game.currentTime>this.lastShootTime+this.loadTime}};Weapon.prototype=new Entity();var Pistol=function(){this.bullets=-1;this.name="Pistol";this.loadTime=150;this.shoot=function(b){if(!this.canShoot(b)){return}var a=new Vector(b.direction,this.outsideSuicideZone);a.originX=b.x;a.originY=b.y;b.game.addEntity(new Bullet(a.x(),a.y(),b.direction),true);this.lastShootTime=b.game.currentTime}};Pistol.prototype=new Weapon();var Shotgun=function(a,b){this.bullets=8;this.name="Shotgun";this.image="shotgun";this.width=50;this.height=16;this.x=a;this.y=b;this.loadTime=300;this.shoot=function(e){if(!this.canShoot(e)){return}var c=new Vector(e.direction,this.outsideSuicideZone);c.originX=e.x;c.originY=e.y;for(var d=-3;d<3;d++){e.game.addEntity(new Bullet(c.x(),c.y(),e.direction+d/15),true)}this.bullets-=1;this.lastShootTime=e.game.currentTime}};Shotgun.prototype=new Weapon();var MachineGun=function(a,b){this.bullets=50;this.name="Machine Gun";this.image="machinegun";this.width=39;this.height=18;this.x=a;this.y=b;this.loadTime=200;this.shoot=function(e){if(!this.canShoot(e)){return}var c=new Vector(e.direction,this.outsideSuicideZone);c.originX=e.x;c.originY=e.y;for(var d=0;d<5;d++){c.sum(d*10);e.game.addEntity(new Bullet(c.x(),c.y(),e.direction),true)}this.bullets-=5;this.lastShootTime=e.game.currentTime}};MachineGun.prototype=new Weapon();var FragmentationPistol=function(a,b){this.bullets=4;this.name="Frag";this.image="frag";this.width=28;this.height=11;this.x=a;this.y=b;this.loadTime=1000;this.shoot=function(d){if(!this.canShoot(d)){return}var c=new Vector(d.direction,this.outsideSuicideZone);c.originX=d.x;c.originY=d.y;d.game.addEntity(new FragmentationBullet(c.x(),c.y(),d.direction,2),true);this.bullets-=1;this.lastShootTime=d.game.currentTime}};FragmentationPistol.prototype=new Weapon();var ArmagedonPistol=function(a,b){this.bullets=1;this.name="Armagedon";this.image="pistol2";this.width=24;this.height=11;this.x=a;this.y=b;this.loadTime=1000;this.shoot=function(d){if(!this.canShoot(d)){return}var c=new Vector(d.direction,this.outsideSuicideZone);c.originX=d.x;c.originY=d.y;d.game.addEntity(new FragmentationBullet(c.x(),c.y(),d.direction,4),true);this.bullets-=1;this.lastShootTime=d.game.currentTime}};ArmagedonPistol.prototype=new Weapon();var MissileLauncher=function(a,b){this.bullets=5;this.name="Missile Launcher";this.image="missile";this.width=12;this.height=51;this.x=a;this.y=b;this.loadTime=1000;this.outsideSuicideZone=30;this.shoot=function(d){if(!this.canShoot(d)){return}var c=new Vector(d.direction,this.outsideSuicideZone);c.originX=d.x;c.originY=d.y;d.game.addEntity(new Missile(c.x(),c.y(),d.direction,4),true);this.bullets-=1;this.lastShootTime=d.game.currentTime}};MissileLauncher.prototype=new Weapon();var weaponTypes=[MachineGun,Shotgun,MissileLauncher];if(typeof window=="undefined"){module.exports.MissileLauncher=MissileLauncher;module.exports.Pistol=Pistol;module.exports.weaponTypes=weaponTypes};