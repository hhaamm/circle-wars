var Explosion=function(a,f,b,c,e,d){this.maxRadius=c?c:30;this.damage=b;this.increase=e?e:1;this.radius=0;this.x=a;this.y=f;this.id=d;this.touchedPlayers=[];debug("Exlosion!");this.process=function(){this.radius+=this.increase;var g=this;if(this.game.isServer||this.game.isSinglePlayer){for(var j=0;j<this.game.players.length;j++){var h=this.game.players[j];if(g.hitTest(h)&&g.touchedPlayers.indexOf(h)==-1){console.log(h);h.hit(g.damage);g.touchedPlayers.push(h);if(g.game.isServer){g.game.triggerServer("entity hit",{id:h.id,life:h.life})}}}}console.log("log: radius "+this.radius);console.log("increase: "+this.increase);console.log("maxradius: "+this.maxRadius);if(this.radius>=this.maxRadius){debug("Explosion end!");this.game.removeEntity(this)}};this.draw=function(g){g.fillStyle="#00ff00";g.beginPath();g.arc(this.x,this.y,this.radius,0,Math.PI*2,true);g.closePath();g.fill()};this.hitTest=function(g){var i=this.x-g.x;var h=this.y-g.y;var j=Math.sqrt(i*i+h*h);return j<this.radius+g.radius}};Explosion.prototype=new Entity();if(typeof window=="undefined"){module.exports=Explosion};